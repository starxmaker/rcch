(this.webpackJsonprcch=this.webpackJsonprcch||[]).push([[0],{174:function(e,t,a){e.exports=a(298)},179:function(e,t,a){},181:function(e,t,a){},190:function(e,t){},192:function(e,t){},203:function(e,t){},205:function(e,t){},230:function(e,t){},232:function(e,t){},233:function(e,t){},239:function(e,t){},241:function(e,t){},259:function(e,t){},261:function(e,t){},273:function(e,t){},276:function(e,t){},298:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(26),c=a.n(i),l=(a(179),a(3)),s=a.n(l),u=a(8),d=a(15),m=(a(181),a(7)),f=a.n(m),p=a(14),b=function(){return o.a.createElement("nav",{className:"navbar navbar-expand-md shadow-sm"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"navbar-brand deco-none"},o.a.createElement(p.a,{icon:"address-book"})," Registro de Cartas Congregaci\xf3n La Herradura")))},h=a(33),v=a(34),E=a(170),g=a.n(E),w=a(47),y=a.n(w),x=function(){function e(t){var a=this;Object(h.a)(this,e),g()().then((function(e){a.online=!1,a.url="",a.token="",a.SQL=e,a.response=!1;var r=window.localStorage.getItem("rcchDB");null==r?a.createDatabase():a.db=new a.SQL.Database(a.toBinArray(r)),a.db.run("PRAGMA foreign_keys = ON;"),n=a,null!=t&&t()}))}return Object(v.a)(e,[{key:"initOnlineServer",value:function(){var e=Object(u.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.response){e.next=11;break}return this.online=!0,this.url=t,this.token=a,window.localStorage.setItem("sessionToken",a),window.localStorage.setItem("server",t),e.next=8,this.testOnlineConnection();case 8:n=e.sent,this.response=n,n||(this.online=!1);case 11:return e.abrupt("return",this.response);case 12:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"testOnlineConnection",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get(this.url+"/misc/test",{headers:{"access-token":this.token}});case 3:return t=e.sent,e.abrupt("return",200==t.status);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getInformation",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get(this.url+t,{headers:{"access-token":this.token}});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),f.a.Report.failure("Informaci\xf3n","Sin conexi\xf3n con el servidor. Vuelva a iniciar sesi\xf3n","OK"),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"postInformation",value:function(){var e=Object(u.a)(s.a.mark((function e(t,a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post(this.url+t,a,{headers:{"access-token":this.token}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),f.a.Report.failure("Informaci\xf3n","Sin conexi\xf3n con el servidor. Vuelva a iniciar sesi\xf3n","OK"),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteInformation",value:function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.delete(this.url+t,{headers:{"access-token":this.token}});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),f.a.Report.failure("Informaci\xf3n","Sin conexi\xf3n con el servidor. Vuelva a iniciar sesi\xf3n","OK"),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createDatabase",value:function(){this.db=new this.SQL.Database,this.buildInitialTables(),this.insertInitialData(),this.saveExistingDatabase()}},{key:"importDatabase",value:function(e,t){var a=this,n=e[0],r=new FileReader;r.onload=function(){var e=new Uint8Array(r.result);a.db=new a.SQL.Database(e),null!==t&&t()},r.readAsArrayBuffer(n)}},{key:"getBDID",value:function(){return this.db.db}},{key:"isOnline",value:function(){return this.online}},{key:"executeCommand",value:function(e){this.db.run(e),this.saveExistingDatabase()}},{key:"saveExistingDatabase",value:function(){window.localStorage.setItem("rcchDB",this.toBinString(this.db.export()))}},{key:"exportExistingDatabase",value:function(){var e=this.db.export(),t=new Blob([e]),a=document.createElement("a");document.body.appendChild(a),a.href=window.URL.createObjectURL(t);var n=new Date,r=n.getFullYear(),o=n.getMonth()+1;o<10&&(o="0"+o);var i=n.getDate();i<10&&(i="0"+i);var c=i+"-"+o+"-"+r;a.download="registro_"+c+".rcch",a.onclick=function(){setTimeout((function(){window.URL.revokeObjectURL(a.href)}),1500)},a.click()}},{key:"buildInitialTables",value:function(){this.db.run("CREATE TABLE publicadores (id integer primary key autoincrement, nombre varchar(255) NOT NULL, grupo int(11) not null default '0', invitado boolean);"),this.db.run("CREATE TABLE medio (id integer primary key autoincrement, nombre varchar(255) NOT NULL, color varchar(255));"),this.db.run("CREATE TABLE publico (id integer primary key autoincrement, nombre varchar(255) NOT NULL, color varchar(255));"),this.db.run("CREATE TABLE records (id integer primary key autoincrement, hora datetime not null, publicador integer not null, medio integer NOT NULL, publico integer not null, textos integer not null, tipo integer not null, FOREIGN KEY (publicador) REFERENCES publicadores(id) ON DELETE CASCADE,FOREIGN KEY (publico) REFERENCES publico(id) ON DELETE CASCADE, FOREIGN KEY (medio) REFERENCES medio(id) ON DELETE CASCADE);")}},{key:"insertInitialData",value:function(){this.db.run("insert into publico (nombre, color) values ('P\xfablico general', 'purple')"),this.db.run("insert into publico (nombre, color) values ('Familiar', 'red')"),this.db.run("insert into publico (nombre, color) values ('Conocido', 'green')"),this.db.run("insert into publico (nombre, color) values ('Paciente', 'blue')"),this.db.run("insert into publico (nombre, color) values ('Trabajador', 'grey')"),this.db.run("insert into medio (nombre, color) values ('Personalmente', 'orange')"),this.db.run("insert into medio (nombre, color) values ('WhatsApp', 'green')"),this.db.run("insert into medio (nombre, color) values ('Email', 'blue')"),this.db.run("insert into medio (nombre, color) values ('Tel\xe9fono', 'pink')"),this.db.run("insert into medio (nombre, color) values ('Servicio postal', 'yellow')")}},{key:"getLastInsertedId",value:function(e){var t=0,a=this.db.prepare("SELECT max(id) as id from "+e);for(a.getAsObject();a.step();){t=a.getAsObject().id,console.log("flag")}return a.free(),console.log(t),t}},{key:"exec",value:function(e){var t=this.db.prepare(e);t.getAsObject();for(var a=[];t.step();)a.push(t.getAsObject());return t.free(),a}},{key:"toBinString",value:function(e){for(var t=new Uint8Array(e),a=[],n=0;65535*n<t.length;n++)a.push(String.fromCharCode.apply(null,t.subarray(65535*n,65535*(n+1))));return a.join("")}},{key:"toBinArray",value:function(e){for(var t=e.length,a=new Uint8Array(t),n=0;n<t;n++)a[n]=e.charCodeAt(n);return a}}]),e}(),k=a(173),O=a(172),j=function(e){Object(k.a)(a,e);var t=Object(O.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"container",style:{marginTop:"2%"}},o.a.createElement("div",{className:"row justify-content-center"},o.a.createElement("div",{className:"col-md-8"},o.a.createElement("div",{className:"card"},this.props.children))))}}]),a}(o.a.Component),C=a(35),I=a(6),L=a(43),A=a(11),D=a(18),S=a(25),N=a(24),P=a(21),T=function(){function e(t,a,n,r,o,i,c,l,s,u){Object(h.a)(this,e),this.id=t,this.hora=a,this.publicador=n,this.medio=r,this.publico=o,this.textos=i,this.video=c,this.publicacion=l,this.tipo=s,this.copias=u}return Object(v.a)(e,[{key:"delete",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=7;break}return e.next=3,n.deleteInformation("/records/"+this.id);case 3:return e.sent,e.abrupt("return",!0);case 7:return n.executeCommand("delete from records where id="+this.id),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"insert",value:function(){var t=Object(u.a)(s.a.mark((function t(a,r,o,i,c,l,u,d){var m,f,p,b,h,v,E,g,w,y;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.postInformation("/records",{publicador:a,medio:r,publico:o,textos:i,tipo:u,publicacionAdjunta:l,videoAdjunto:c,copies:d});case 3:return m=t.sent,t.abrupt("return",new e(m.idRecord,m.publicador,m.medio,m.publico,m.textos,m.tipo,m.copias));case 7:return f=new Date,p=f.getFullYear(),(b=f.getMonth()+1)<10&&(b="0"+b),(h=f.getDate())<10&&(h="0"+h),(v=f.getHours())<10&&(v="0"+v),(E=f.getMinutes())<10&&(E="0"+E),(g=f.getSeconds())<10&&(g="0"+g),w=p+"-"+b+"-"+h+" "+v+":"+E+":"+g,n.executeCommand("insert into records (hora, publicador, medio, publico, textos, tipo) values ('"+w+"',"+a+","+r+","+o+","+i+","+u+")"),y=n.getLastInsertedId("records"),t.abrupt("return",new e(y,w,a,r,o,i,u));case 23:case"end":return t.stop()}}),t)})));return function(e,a,n,r,o,i,c,l){return t.apply(this,arguments)}}()},{key:"getById",value:function(){var t=Object(u.a)(s.a.mark((function t(a){var r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.getInformation("/records/"+a);case 3:return r=t.sent,t.abrupt("return",new e(r.idRecord,r.publicador,r.medio,r.publico,r.textos,r.tipo));case 7:if(0!=(o=n.exec("select * from records where id="+a)).length){t.next=10;break}return t.abrupt("return",!1);case 10:return t.abrupt("return",new e(o[0].id,o[0].hora,o[0].publicador,o[0].medio,o[0].publico,o[0].textos,o[0].tipo));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getAllRecords",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=9;break}return e.next=3,n.getInformation("/records/getLast");case 3:return t=e.sent,a=[],t.forEach((function(e){a.push(Object(I.a)(Object(I.a)({},e),{},{hora:e.hora_year+"-"+e.hora_month+"-"+e.hora_day+" "+e.hora_hour+":"+e.hora_minute+":"+e.hora_second}))})),e.abrupt("return",a);case 9:return e.abrupt("return",n.exec("select r.id, r.hora, r.textos, r.tipo, p.nombre as publicador, d.nombre as publico, m.nombre as medio from records r left join publicadores p on (r.publicador=p.id) left join publico d on (r.publico=d.id) left join medio m on (r.medio=m.id) order by 1 desc"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getDailyStats",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,r,o,i,c,l,u,d,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=7;break}return e.next=3,n.getInformation("/estadisticas/today");case 3:return t=e.sent,e.abrupt("return",t);case 7:return a=new Date,r=a.getFullYear(),(o=a.getMonth()+1)<10&&(o="0"+o),(i=a.getDate())<10&&(i="0"+i),c=r+"-"+o+"-"+i,l=n.exec("select count(*) as cartas, count(distinct(publicador)) as publicadores, sum(textos) as textos, SUM(CASE WHEN tipo = 1 THEN 1 ELSE 0 END) as revisitas, round(count(*)/count(distinct(publicador)),1) as porPublicador  from records where date(hora)=date('"+c+"')"),u=[],n.exec("select p.nombre as publico, count (r.id) as cartas, p.color  from records r left join publico p on (r.publico=p.id) group by publico having date('"+c+"')=date(hora)").map((function(e){u.push({title:e.publico,value:e.cartas,color:e.color})})),d=n.exec("select m.nombre as medio, count (r.id) as cartas, m.color  from records r left join medio m on (r.medio=m.id) group by medio having date('"+c+"')=date(hora)"),m=[],d.map((function(e){m.push({title:e.medio,value:e.cartas,color:e.color})})),e.abrupt("return",{cartas:l[0].cartas,publicadores:l[0].publicadores,textos:l[0].textos,revisitas:l[0].revisitas,porPublicador:l[0].porPublicador,publicos:u,medios:m});case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),R=function(){function e(t,a,n,r){Object(h.a)(this,e),this.id=t,this.nombre=a,this.grupo=n,this.invitado=r}return Object(v.a)(e,[{key:"delete",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=7;break}return e.next=3,n.deleteInformation("/publicadores/"+this.id);case 3:return e.sent,e.abrupt("return",!0);case 7:return n.executeCommand("delete from publicadores where id="+this.id),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"insert",value:function(){var t=Object(u.a)(s.a.mark((function t(a,r,o){var i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.postInformation("/publicadores",{nombre:a,grupo:r,invitado:o});case 3:return i=t.sent,t.abrupt("return",new e(i.idPublicador,i.nombre,i.grupo,i.invitado));case 7:return n.executeCommand("insert into publicadores (nombre,grupo, invitado) values ('"+a+"',"+r+", "+o+")"),c=n.getLastInsertedId("publicadores"),t.abrupt("return",new e(c,a,r,o));case 10:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"getById",value:function(){var t=Object(u.a)(s.a.mark((function t(a){var r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.getInformation("/publicadores/"+a);case 3:return r=t.sent,t.abrupt("return",new e(r.idPublicador,r.nombre,r.grupo,r.invitado));case 7:if(0!=(o=n.exec("select * from publicadores where id="+a)).length){t.next=10;break}return t.abrupt("return",!1);case 10:return t.abrupt("return",new e(o[0].id,o[0].nombre,o[0].isInvitado));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getAllPublicadores",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=9;break}return e.next=3,n.getInformation("/publicadores/getAll");case 3:return t=e.sent,a=[],t.forEach((function(e){a.push({value:e.idPublicador,label:e.nombre})})),e.abrupt("return",a);case 9:return e.abrupt("return",n.exec("select id as value, nombre as label from publicadores"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),B=function(){function e(t,a,n){Object(h.a)(this,e),this.id=t,this.nombre=a,this.color=n}return Object(v.a)(e,[{key:"delete",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=7;break}return e.next=3,n.deleteInformation("/publicos/"+this.id);case 3:return e.sent,e.abrupt("return",!0);case 7:return n.executeCommand("delete from publico where id="+this.id),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"insert",value:function(){var t=Object(u.a)(s.a.mark((function t(a,r){var o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.postInformation("/publicos",{nombre:a,color:r});case 3:return o=t.sent,t.abrupt("return",new e(o.idPublico,o.nombre,o.color));case 7:return n.executeCommand("insert into publico (nombre, color) values ('"+a+"', '"+r+"')"),i=n.getLastInsertedId("publico"),t.abrupt("return",new e(i,a,r));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"getById",value:function(){var t=Object(u.a)(s.a.mark((function t(a){var r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.getInformation("/publicos/"+a);case 3:return r=t.sent,t.abrupt("return",new e(r.idPublico,r.nombre,r.color));case 7:if(0!=(o=n.exec("select * from publico where id="+a)).length){t.next=10;break}return t.abrupt("return",!1);case 10:return t.abrupt("return",new e(o[0].id,o[0].nombre,o[0].color));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getAllPublicos",value:function(){var e=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=9;break}return e.next=3,n.getInformation("/publicos/getAll");case 3:return t=e.sent,a=[],t.forEach((function(e){a.push({value:e.idPublico,label:e.nombre})})),e.abrupt("return",a);case 9:return e.abrupt("return",n.exec("select id as value, nombre as label from publico"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),M=function(){function e(t,a,n){Object(h.a)(this,e),this.id=t,this.nombre=a,this.color=n}return Object(v.a)(e,[{key:"delete",value:function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=7;break}return e.next=3,n.deleteInformation("/medios/"+this.id);case 3:return e.sent,e.abrupt("return",!0);case 7:return n.executeCommand("delete from medio where id="+this.id),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"insert",value:function(){var t=Object(u.a)(s.a.mark((function t(a,r){var o,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.postInformation("/medios",{nombre:a,color:r});case 3:return o=t.sent,t.abrupt("return",new e(o.idMedio,o.nombre,o.color));case 7:return n.executeCommand("insert into medio (nombre, color) values ('"+a+"', '"+r+"')"),i=n.getLastInsertedId("medio"),t.abrupt("return",new e(i,a,r));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"getById",value:function(){var t=Object(u.a)(s.a.mark((function t(a){var r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.getInformation("/medios/"+a);case 3:return r=t.sent,t.abrupt("return",new e(r.idMedio,r.nombre,r.color));case 7:if(0!=(o=n.exec("select * from medio where id="+a)).length){t.next=10;break}return t.abrupt("return",!1);case 10:return t.abrupt("return",new e(o[0].id,o[0].nombre,o[0].color));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();M.getAllMedios=Object(u.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=9;break}return e.next=3,n.getInformation("/medios/getAll");case 3:return t=e.sent,a=[],t.forEach((function(e){a.push({value:e.idMedio,label:e.nombre})})),e.abrupt("return",a);case 9:return e.abrupt("return",n.exec("select id as value, nombre as label from medio"));case 10:case"end":return e.stop()}}),e)})));var H=M,F=a(13),G=o.a.forwardRef((function(e,t){var a=o.a.useState(!1),n=Object(d.a)(a,2),r=n[0],i=n[1];return o.a.useImperativeHandle(t,(function(){return{handleModalOpen:function(e){i(!0)}}})),o.a.createElement(F.a,{show:r,onHide:function(e){i(!1)}},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Gestionar ",e.tipo)),o.a.createElement(F.a.Body,null,e.allElements.map((function(t){return o.a.createElement("a",{key:t.value,className:"list-group-item list-group-item-action flex-column align-items-start"},o.a.createElement("div",{key:"div"+t.value,className:"d-flex w-100 justify-content-between"},o.a.createElement("h5",{key:"h5"+t.value,className:"mb-1"},t.label),o.a.createElement("small",{key:"small"+t.value,className:"text-muted"},o.a.createElement(p.a,{key:"fw"+t.value,onClick:function(){return e.deleteFunction(t.value)},icon:"trash-alt"}))))}))))})),U=a(84),V=a(108),K={menu:function(e,t){return Object(I.a)(Object(I.a)({},e),{},{backgroundColor:"#181818",color:"#AEBEAE",zIndex:3})},option:function(e,t){return Object(I.a)(Object(I.a)({},e),{},{backgroundColor:t.isFocused?"#222222":"181818",color:"#AEBEAE"})},input:function(e,t){return Object(I.a)(Object(I.a)({},e),{},{color:"#AEBEAE"})},control:function(e,t){return Object(I.a)(Object(I.a)({},e),{},{background:"transparent",borderColor:"#404040"})},singleValue:function(e,t){return Object(I.a)(Object(I.a)({},e),{},{color:"#AEBEAE"})}},_=o.a.forwardRef((function(e,t){var a=o.a.useState(!1),r=Object(d.a)(a,2),i=r[0],c=r[1],l=o.a.useState([]),m=Object(d.a)(l,2),b=m[0],h=m[1],v=o.a.useState([]),E=Object(d.a)(v,2),g=E[0],w=E[1],y=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var t=Object(u.a)(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(a=window.prompt("Ingrese nombre del invitado"))&&void 0!==a&&""!==a.trim()){t.next=3;break}return t.abrupt("return",!1);case 3:return f.a.Loading.arrows("Agregando invitado"),t.next=6,R.insert(a,0,!0);case 6:return n=t.sent,t.next=9,e.refreshData({publicadores:!0});case 9:return f.a.Notify.success("Invitado agregado"),j({label:a,value:n.id}),t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();o.a.useImperativeHandle(t,(function(){return{handleModalOpen:function(e){return Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.a.Loading.arrows("Recuperando lista de espera"),e.next=3,O();case 3:c(!0),f.a.Loading.remove();case 5:case"end":return e.stop()}}),e)})))()}}}));var k=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=3;break}return e.next=3,n.postInformation("/listas",{lista:t});case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=5;break}return e.next=3,n.getInformation("/listas");case 3:t=e.sent,h(t.lista);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e){for(var t=[],a=0;a<b.length;a++)t.push(b[a]);if(function(e,t){var a;for(a=0;a<t.length;a++)if(t[a]===e)return!0;return!1}(e,t))return!1;if(C(e))t.push(e);else{for(var n=!0,r=0;r<t.length;r++)if(C(t[r])){t.splice(r,0,e),n=!1;break}n&&t.push(e)}h(t),k(t)},C=function(e){return-1!=g.indexOf(e)},I=function(e){var t=Object(V.a)(b);return t.splice(t.indexOf(e),1),h(t),k(t),t};return o.a.createElement(F.a,{show:i,onHide:y},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Lista de espera")),o.a.createElement(F.a.Body,null,o.a.createElement(A.a.Group,{as:N.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Publicador"),o.a.createElement(P.a,{sm:"8"},o.a.createElement(S.a,null,o.a.createElement(U.a,{options:e.allPublicadores,styles:K,name:"fldPublicador",onChange:function(e){j(e),f.a.Notify.success("Publicador agregado a la lista")}}),o.a.createElement(S.a.Append,null,o.a.createElement(D.a,{variant:"outline-secondary",onClick:x},o.a.createElement(p.a,{icon:"hiking"})))))),o.a.createElement("div",{styles:{paddingTop:"20%"}},b.map((function(t,a){return o.a.createElement("a",{key:t.value,className:"list-group-item list-group-item-action flex-column align-items-start"},o.a.createElement("div",{className:"d-flex w-100 justify-content-between"},o.a.createElement("h5",{className:"mb-1",onClick:function(){!function(t){I(t);w([].concat(Object(V.a)(g),[t])),e.replacePublicador(t),y()}(t)}},o.a.createElement("span",{className:"currentNumber"}," ",a+1,"# ")," ",t.label),o.a.createElement("small",{className:"text-muted"},o.a.createElement(p.a,{icon:"trash-alt",onClick:function(){I(t)}}))))})))))})),Y=function(e){var t={};e.fields.forEach((function(e){t=Object(I.a)(Object(I.a)({},t),{},Object(C.a)({},e.name,e.default))}));var a=o.a.useState(t),n=Object(d.a)(a,2),r=n[0],i=n[1],c=function(e){var t=e.target;"checkbox"===t.type?i((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(C.a)({},t.name,t.checked))})):i((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(C.a)({},t.name,t.value))}))};return o.a.createElement(F.a,{show:e.show,onHide:function(t){e.setShow(!1),console.log(r)}},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Agregar ",e.tipo)),o.a.createElement(F.a.Body,null,e.fields.map((function(e,t){return o.a.createElement(A.a.Group,{as:N.a,key:t},o.a.createElement(A.a.Label,{column:!0,sm:"4"},e.label),o.a.createElement(P.a,{sm:"8"},o.a.createElement(A.a.Control,{type:e.type,name:e.name,value:r[e.name],checked:r[e.name],onChange:c})))})),o.a.createElement("div",{className:"text-center"},o.a.createElement(D.a,{variant:"primary",onClick:function(a){a.preventDefault(),e.submitFunction(r)&&i(t)}},"Agregar"))))},q={menu:function(e,t){return Object(I.a)(Object(I.a)({},e),{},{backgroundColor:"#181818",color:"#AEBEAE",zIndex:3})},option:function(e,t){return Object(I.a)(Object(I.a)({},e),{},{backgroundColor:t.isFocused?"#222222":"181818",color:"#AEBEAE"})},input:function(e,t){return Object(I.a)(Object(I.a)({},e),{},{color:"#AEBEAE"})},control:function(e,t){return Object(I.a)(Object(I.a)({},e),{},{background:"transparent",borderColor:"#404040"})},singleValue:function(e,t){return Object(I.a)(Object(I.a)({},e),{},{color:"#AEBEAE"})}},z=o.a.forwardRef((function(e,t){var a=o.a.useState(!1),n=Object(d.a)(a,2),r=n[0],i=n[1],c=o.a.useState(!1),l=Object(d.a)(c,2),m=l[0],b=l[1],h=o.a.useState(!1),v=Object(d.a)(h,2),E=v[0],g=v[1],w=o.a.useState({fldPublicador:{value:"0",label:"Seleccione"},fldDestinatario:1,fldMedio:1,fldTextos:0,fldPublicacion:!1,fldVideo:!1,fldTipo:"0",fldCopias:1}),y=Object(d.a)(w,2),x=y[0],k=y[1],O=o.a.useRef(null),j=o.a.useRef(null),M=o.a.useRef(null),F=o.a.useRef(null),V=function(e){"publicadores"==e?O.current.handleModalOpen():"publicos"==e?M.current.handleModalOpen():"lista"==e?F.current.handleModalOpen():j.current.handleModalOpen()},K=function(){k({fldPublicador:{value:"0",label:"Seleccione"},fldDestinatario:1,fldMedio:1,fldTextos:0,fldTipo:"0",fldPublicacion:!1,fldVideo:!1,fldCopias:1})};o.a.useImperativeHandle(t,(function(){return{reset:function(){K()},openLista:function(){V("lista")}}}));var z=function(e){if("target"in e)if("checkbox"===e.target.type){var t=e.target,a=t.name,n=t.checked;k(Object(I.a)(Object(I.a)({},x),{},Object(C.a)({},a,n)))}else{var r=e.target,o=r.name,i=r.value;k(Object(I.a)(Object(I.a)({},x),{},Object(C.a)({},o,i)))}else k(Object(I.a)(Object(I.a)({},x),{},{fldPublicador:e}))},Q=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!=x.fldPublicador.value){e.next=3;break}return e.abrupt("return",!1);case 3:return f.a.Loading.arrows("Agregando registro"),e.next=6,T.insert(x.fldPublicador.value,x.fldMedio,x.fldDestinatario,x.fldTextos,x.fldVideo,x.fldPublicacion,x.fldTipo,x.fldCopias);case 6:e.sent,f.a.Loading.remove(),K(),f.a.Notify.success("Registro agregado");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var t=Object(u.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.a.Loading.arrows("Eliminando publicador"),t.next=3,R.getById(a);case 3:if(0==(n=t.sent)){t.next=7;break}return t.next=7,n.delete();case 7:f.a.Notify.success("Publicador eliminado"),f.a.Loading.remove(),e.refreshData({publicadores:!0});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=Object(u.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.a.Loading.arrows("Eliminando medio"),t.next=3,H.getById(a);case 3:if(0==(n=t.sent)){t.next=7;break}return t.next=7,n.delete();case 7:f.a.Notify.success("Medio eliminado"),f.a.Loading.remove(),e.refreshData({medios:!0});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$=function(){var t=Object(u.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.a.Loading.arrows("Eliminando p\xfablico"),t.next=3,B.getById(a);case 3:if(0==(n=t.sent)){t.next=7;break}return t.next=7,n.delete();case 7:f.a.Notify.success("Publico eliminado"),f.a.Loading.remove(),e.refreshData({publicos:!0});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(e){"publicador"===e?i(!0):"medio"===e?b(!0):g(!0)},Z=function(){var t=Object(u.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a.nombre&&void 0!==a.nombre&&""!==a.nombre.trim()){t.next=2;break}return t.abrupt("return",!1);case 2:if(null!==a.grupo&&void 0!==a.grupo&&""!==a.grupo.trim()){t.next=4;break}return t.abrupt("return",!1);case 4:return f.a.Loading.arrows("Agregando publicador"),t.next=7,R.insert(a.nombre,a.grupo,a.isInvitado);case 7:return n=t.sent,f.a.Loading.remove(),t.next=11,e.refreshData({publicadores:!0});case 11:return f.a.Notify.success("Publicador agregado"),k(Object(I.a)(Object(I.a)({},x),{},{fldPublicador:{value:n.id,label:n.nombre}})),t.abrupt("return",!0);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ee=function(){var t=Object(u.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a.nombre&&void 0!==a.nombre&&""!==a.nombre.trim()){t.next=2;break}return t.abrupt("return",!1);case 2:if(null!==a.color&&void 0!==a.color&&""!==a.color.trim()){t.next=4;break}return t.abrupt("return",!1);case 4:return f.a.Loading.arrows("Agregando medio"),t.next=7,H.insert(a.nombre,a.color);case 7:return n=t.sent,f.a.Loading.remove(),t.next=11,e.refreshData({medios:!0});case 11:return f.a.Notify.success("Medio agregado"),k(Object(I.a)(Object(I.a)({},x),{},{fldMedio:n.id})),t.abrupt("return",!0);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),te=function(){var t=Object(u.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a.nombre&&void 0!==a.nombre&&""!==a.nombre.trim()){t.next=2;break}return t.abrupt("return",!1);case 2:if(null!==a.color&&void 0!==a.color&&""!==a.color.trim()){t.next=4;break}return t.abrupt("return",!1);case 4:return f.a.Loading.arrows("Agregando p\xfablico"),t.next=7,B.insert(a.nombre,a.color);case 7:return n=t.sent,f.a.Loading.remove(),f.a.Notify.success("Publico agregado"),t.next=12,e.refreshData({publicos:!0});case 12:return k(Object(I.a)(Object(I.a)({},x),{},{fldDestinatario:n.id})),t.abrupt("return",!0);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return o.a.createElement(A.a,{onSubmit:Q},o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"container"},o.a.createElement(A.a.Group,{as:N.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Publicador"),o.a.createElement(P.a,{sm:"8"},o.a.createElement(S.a,null,o.a.createElement(U.a,{options:e.allPublicadores,styles:q,name:"fldPublicador",value:x.fldPublicador,onChange:z}),o.a.createElement(S.a.Append,null,o.a.createElement(D.a,{variant:"outline-secondary",onClick:function(){X("publicador")}},o.a.createElement(p.a,{icon:"plus-square"})),o.a.createElement(D.a,{variant:"outline-secondary",onClick:function(){return V("publicadores")}},o.a.createElement(p.a,{icon:"pencil-alt"})),o.a.createElement(D.a,{variant:"outline-secondary",onClick:function(){return V("lista")}},o.a.createElement(p.a,{icon:"ellipsis-h"})),o.a.createElement(G,{tipo:"Publicadores",allElements:e.allPublicadores,ref:O,refreshData:e.refreshData,deleteFunction:W}),o.a.createElement(Y,{show:r,setShow:i,tipo:"Publicador",submitFunction:Z,fields:[{name:"nombre",type:"text",label:"Nombre",default:""},{name:"grupo",type:"number",label:"Grupo",default:"0"},{name:"isInvitado",type:"checkbox",label:"\xbfEs invitado?",default:!1}]}))))),o.a.createElement(A.a.Group,{as:N.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Destinatario"),o.a.createElement(P.a,{sm:"8"},o.a.createElement(S.a,null,o.a.createElement(A.a.Control,{as:"select",name:"fldDestinatario",value:x.fldDestinatario,onChange:z},e.allPublicos.map((function(e){return o.a.createElement("option",{key:e.value,value:e.value},e.label)}))),o.a.createElement(S.a.Append,null,o.a.createElement(D.a,{variant:"outline-secondary",onClick:function(){X("publico")}},o.a.createElement(p.a,{icon:"plus-square"})),o.a.createElement(D.a,{variant:"outline-secondary",onClick:function(){return V("publicos")}},o.a.createElement(p.a,{icon:"pencil-alt"})),o.a.createElement(G,{tipo:"Destinatarios",allElements:e.allPublicos,ref:M,refreshData:e.refreshData,deleteFunction:$}),o.a.createElement(Y,{show:E,setShow:g,tipo:"Destinatario",submitFunction:te,fields:[{name:"nombre",type:"text",label:"Nombre",default:""},{name:"color",type:"color",label:"Color",default:""}]}))))),o.a.createElement(A.a.Group,{as:N.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Medio"),o.a.createElement(P.a,{sm:"8"},o.a.createElement(S.a,null,o.a.createElement(A.a.Control,{as:"select",name:"fldMedio",value:x.fldMedio,onChange:z},e.allMedios.map((function(e){return o.a.createElement("option",{key:e.value,value:e.value},e.label)}))),o.a.createElement(S.a.Append,null,o.a.createElement(D.a,{variant:"outline-secondary",onClick:function(){X("medio")}},o.a.createElement(p.a,{icon:"plus-square"})),o.a.createElement(D.a,{variant:"outline-secondary",onClick:function(){return V("medios")}},o.a.createElement(p.a,{icon:"pencil-alt"})),o.a.createElement(G,{tipo:"Medios",allElements:e.allMedios,ref:j,refreshData:e.refreshData,deleteFunction:J}),o.a.createElement(Y,{show:m,setShow:b,tipo:"Medio",submitFunction:ee,fields:[{name:"nombre",type:"text",label:"Nombre",default:""},{name:"color",type:"color",label:"Color",default:""}]}))))),o.a.createElement(A.a.Group,{as:N.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Textos b\xedblicos"),o.a.createElement(P.a,{sm:"8"},o.a.createElement(S.a,null,o.a.createElement(S.a.Prepend,null,o.a.createElement(D.a,{variant:"outline-secondary",onClick:function(){k((function(e){return Object(I.a)(Object(I.a)({},x),{},{fldTextos:e.fldTextos-1})}))}},"-")),o.a.createElement(L.a,{name:"fldTextos",value:x.fldTextos,onChange:z}),o.a.createElement(S.a.Append,null,o.a.createElement(D.a,{variant:"outline-secondary",onClick:function(){k((function(e){return Object(I.a)(Object(I.a)({},x),{},{fldTextos:e.fldTextos+1})}))}},"+"))))),o.a.createElement(A.a.Group,{as:N.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Adjunto"),o.a.createElement(P.a,{sm:"8"},o.a.createElement(A.a.Check,{type:"switch",id:"switchVideo",label:"V\xeddeo",name:"fldVideo",checked:x.fldVideo,onChange:z}),o.a.createElement(A.a.Check,{type:"switch",label:"Publicaci\xf3n",id:"switchPublicacion",name:"fldPublicacion",checked:x.fldPublicacion,onChange:z}))),o.a.createElement(A.a.Group,{as:N.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Tipo"),o.a.createElement(P.a,{sm:"8"},o.a.createElement(A.a.Check,{type:"radio",name:"fldTipo",label:"Primera visita",value:"0",checked:"0"===x.fldTipo,onChange:z}),o.a.createElement(A.a.Check,{type:"radio",label:"Revisita",name:"fldTipo",value:"1",checked:"1"===x.fldTipo,onChange:z}))),o.a.createElement(A.a.Group,{as:N.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Copias"),o.a.createElement(P.a,{sm:"8"},o.a.createElement(S.a,null,o.a.createElement(S.a.Prepend,null,o.a.createElement(D.a,{variant:"outline-secondary",onClick:function(){if(1===x.fldCopias)return!1;k((function(e){return Object(I.a)(Object(I.a)({},x),{},{fldCopias:e.fldCopias-1})}))}},"-")),o.a.createElement(L.a,{name:"fldCopias",value:x.fldCopias,onChange:z}),o.a.createElement(S.a.Append,null,o.a.createElement(D.a,{variant:"outline-secondary",onClick:function(){k((function(e){return Object(I.a)(Object(I.a)({},x),{},{fldCopias:e.fldCopias+1})}))}},"+")))))),o.a.createElement("div",{className:"text-center"},o.a.createElement(D.a,{variant:"primary",type:"submit"},"Guardar registro"))),o.a.createElement(_,{allPublicadores:e.allPublicadores,ref:F,addPublicador:Z,refreshData:e.refreshData,replacePublicador:function(e){k(Object(I.a)(Object(I.a)({},x),{},{fldPublicador:e}))}}))})),Q=a(30),W=o.a.forwardRef((function(e,t){var a=o.a.useState(!1),i=Object(d.a)(a,2),c=i[0],l=i[1],s=function(e){l(!1)};o.a.useImperativeHandle(t,(function(){return{handleModalOpen:function(e){l(!0)}}}));var u=function(t){n.importDatabase(t,e.refreshData),s(),f.a.Report.success("Informaci\xf3n","Base de datos importada con \xe9xito","OK")},m=function(e){var t=e.dataTransfer.files;u(t)},p=function(e){document.getElementById("drop-area").classList.add("highlight")},b=function(e){document.getElementById("drop-area").classList.remove("highlight")},h=function(e){e.preventDefault(),e.stopPropagation()};return Object(r.useEffect)((function(){c&&(["dragenter","dragover","dragleave","drop"].forEach((function(e){document.getElementById("drop-area").addEventListener(e,h,!1)})),["dragenter","dragover"].forEach((function(e){document.getElementById("drop-area").addEventListener(e,p,!1)})),["dragleave","drop"].forEach((function(e){document.getElementById("drop-area").addEventListener(e,b,!1)})),document.getElementById("drop-area").addEventListener("drop",m,!1))}),[c]),o.a.createElement(F.a,{show:c,onHide:s},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Importar base de datos")),o.a.createElement(F.a.Body,null,o.a.createElement("div",{id:"drop-area"},o.a.createElement("form",{className:"my-form"},o.a.createElement("p",null,"Arrastre el archivo con extensi\xf3n .RCCH o pulse el siguiente bot\xf3n para buscarlo"),o.a.createElement("input",{type:"file",id:"fileElem",name:"fileElem",onChange:function(e){var t=e.target.files;u(t)}}),o.a.createElement("label",{className:"btn btn-primary",htmlFor:"fileElem"},"Buscar archivo")))))})),J=o.a.forwardRef((function(e,t){var a=o.a.useState(!1),n=Object(d.a)(a,2),r=n[0],i=n[1];o.a.useImperativeHandle(t,(function(){return{handleModalOpen:function(t){return Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.a.Loading.arrows("Cargando datos"),e.refreshData({records:!0}),i(!0),f.a.Loading.remove();case 4:case"end":return t.stop()}}),t)})))()}}}));var c=function(){var t=Object(u.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.a.Loading.arrows("Eliminando registro"),t.next=3,T.getById(a);case 3:if(0==(n=t.sent)){t.next=7;break}return t.next=7,n.delete();case 7:f.a.Notify.success("Carta eliminada"),f.a.Loading.remove(),e.refreshData({records:!0});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return o.a.createElement(F.a,{show:r,onHide:function(e){i(!1)}},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Historial de cartas")),o.a.createElement(F.a.Body,null,e.allElements.map((function(e){return o.a.createElement("a",{key:e.id,className:"list-group-item list-group-item-action flex-column align-items-start"},o.a.createElement("div",{key:"div"+e.id,className:"d-flex w-100 justify-content-between"},o.a.createElement("h5",{key:"h5"+e.id,className:"mb-1"},e.publicador),o.a.createElement("small",{key:"small"+e.id,className:"text-muted"}," ",function(e){"object"!==typeof e&&(e=new Date(e));var t,a=Math.floor((new Date-e)/1e3),n=Math.floor(a/31536e3);return n>=1?t="a\xf1o":(n=Math.floor(a/2592e3))>=1?t="mes":(n=Math.floor(a/86400))>=1?t="d\xeda":(n=Math.floor(a/3600))>=1?t="hora":(n=Math.floor(a/60))>=1?t="minuto":(n=a,t="segundo"),(n>1||0===n)&&(t+="s"),"Hace "+n+" "+t}(e.hora)," ",o.a.createElement(p.a,{key:"fw"+e.id,onClick:function(){return c(e.id)},icon:"trash-alt"}))),o.a.createElement("p",{className:"mb-1"},o.a.createElement("font",{color:0==e.tipo?"purple":"orange"},0==e.tipo?"Primera visita":"Revisita")," a ",e.publico),o.a.createElement("small",{className:"text-muted"},"Enviada por ",e.medio))}))))})),$=a(61),X=function(e){return o.a.createElement("div",{style:{display:"inline-block",paddingRight:20}},o.a.createElement("div",{style:{height:"1.5em",width:30,backgroundColor:e.color,float:"left"}}),o.a.createElement("div",{style:{paddingLeft:10,float:"left"}},e.label," "))},Z=a(85),ee=function(e){return o.a.createElement("div",{style:{float:"left",width:e.width,textAlign:"center",height:80,marginTop:10}},o.a.createElement("h4",null,e.label),o.a.createElement("h4",{styles:{marginTop:10}},e.value," ",o.a.createElement(p.a,{icon:e.icon,style:e.color})))},te=o.a.forwardRef((function(e,t){var a=o.a.useState(!1),n=Object(d.a)(a,2),r=n[0],i=n[1],c=o.a.useState({cartas:0,publicadores:0,textos:0,revisitas:0,videos:0,publicaciones:0,revisitaDiff:[{title:"One",value:10,color:"#6f42c1"},{title:"Two",value:15,color:"#fd7e14"}],publicos:[{title:"One",value:10,color:"#E38627"},{title:"Two",value:15,color:"#C13C37"},{title:"Three",value:20,color:"#6A2135"}],medios:[{title:"One",value:10,color:"#E38627"},{title:"Two",value:15,color:"#C13C37"},{title:"Three",value:20,color:"#6A2135"}]}),l=Object(d.a)(c,2),m=l[0],p=l[1];o.a.useImperativeHandle(t,(function(){return{handleModalOpen:function(e){return Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.a.Loading.arrows("Cargando estadisticas"),e.next=3,b();case 3:i(!0),f.a.Loading.remove();case 5:case"end":return e.stop()}}),e)})))()}}}));var b=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.getDailyStats();case 2:(t=e.sent)&&(console.log(t),p(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(F.a,{show:r,onHide:function(e){i(!1)}},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Estad\xedsticas del d\xeda de hoy")),o.a.createElement(F.a.Body,null,o.a.createElement($.a,{interval:5e9},o.a.createElement($.a.Item,null,o.a.createElement("h1",{className:"display-5",style:{textAlign:"center"}},"\xbfC\xf3mo nos fue?"),o.a.createElement(ee,{label:"Cartas",value:m.cartas,icon:"envelope",color:{color:"brown"},width:"50%"}),o.a.createElement(ee,{label:"Textos",value:m.textos,icon:"book",color:{color:"grey"},width:"50%"}),o.a.createElement(ee,{label:"Revisitas",value:m.revisitas,icon:"undo-alt",color:{color:"orange"},width:"50%"}),o.a.createElement(ee,{label:"Videos",value:m.videos,icon:"film",color:{color:"cyan"},width:"50%"}),o.a.createElement(ee,{label:"Publicaciones",value:m.publicaciones,icon:"file-alt",color:{color:"indigo"},width:"100%"})),o.a.createElement($.a.Item,null,o.a.createElement("h1",{className:"display-5",style:{textAlign:"center"}},"\xbfHemos hablado antes?"),o.a.createElement(Z.PieChart,{style:{height:300},data:m.revisitaDiff,label:function(e){var t=e.dataEntry;return"".concat(Math.round(t.percentage),"%")},labelStyle:{fontSize:"5px",fontFamily:"sans-serif",fill:"white"}}),o.a.createElement("div",{style:{textAlign:"center",paddingTop:10}},m.revisitaDiff.map((function(e){return o.a.createElement(X,{color:e.color,label:e.title})})))),o.a.createElement($.a.Item,null,o.a.createElement("h1",{className:"display-5",style:{textAlign:"center"}},"\xbfA qui\xe9n enviaremos?"),o.a.createElement(Z.PieChart,{style:{height:300},data:m.publicos,label:function(e){var t=e.dataEntry;return"".concat(Math.round(t.percentage),"%")},labelStyle:{fontSize:"5px",fontFamily:"sans-serif",fill:"white"}}),o.a.createElement("div",{style:{textAlign:"center",paddingTop:10}},m.publicos.map((function(e){return o.a.createElement(X,{color:e.color,label:e.title})})))),o.a.createElement($.a.Item,null,o.a.createElement("h1",{className:"display-5",style:{textAlign:"center"}},"\xbfC\xf3mo se enviar\xe1n?"),o.a.createElement(Z.PieChart,{style:{height:300},data:m.medios,label:function(e){var t=e.dataEntry;return"".concat(Math.round(t.percentage),"%")},labelStyle:{fontSize:"5px",fontFamily:"sans-serif",fill:"white"}}),o.a.createElement("div",{style:{textAlign:"center",paddingTop:10}},m.medios.map((function(e){return o.a.createElement(X,{color:e.color,label:e.title})})))))))})),ae=o.a.forwardRef((function(e,t){var a=e.children,n=e.onClick;return o.a.createElement("span",{ref:t,onClick:function(e){e.preventDefault(),n(e)}},o.a.createElement(p.a,{icon:"cog"}),a)})),ne=function(e){var t=o.a.useRef(null),a=o.a.useRef(null),r=o.a.useRef(null);return o.a.createElement("div",{className:"card-header"},o.a.createElement(Q.a,{style:{float:"left"}},o.a.createElement(Q.a.Toggle,{as:ae,id:"dropdown-basic"}),o.a.createElement(Q.a.Menu,null,o.a.createElement(Q.a.Item,{onClick:function(){window.confirm("Se borrar\xe1n todos los datos guardados")&&(n.createDatabase(),e.refreshData())},style:e.online?{display:"none"}:{}}," ",o.a.createElement(p.a,{icon:"file"})," Nueva base de datos"),o.a.createElement(Q.a.Item,{onClick:function(e){t.current.handleModalOpen()},style:e.online?{display:"none"}:{}},o.a.createElement(p.a,{icon:"folder"})," Abrir base de datos"),o.a.createElement(Q.a.Item,{onClick:function(){n.exportExistingDatabase()},style:e.online?{display:"none"}:{}},o.a.createElement(p.a,{icon:"download"})," Descargar base de datos"),o.a.createElement(Q.a.Item,{style:e.online?{}:{display:"none"},onClick:function(){f.a.Loading.arrows("Cerrando sesi\xf3n"),window.localStorage.removeItem("sessionToken"),window.location.reload()}},o.a.createElement(p.a,{icon:"sign-out-alt"})," Cerrar sesi\xf3n"),o.a.createElement(Q.a.Item,{onClick:e.showLista},o.a.createElement(p.a,{icon:"ellipsis-h"})," Lista de espera"),o.a.createElement(Q.a.Item,{onClick:function(e){a.current.handleModalOpen()}},o.a.createElement(p.a,{icon:"history"})," Ver historial"),o.a.createElement(Q.a.Item,{onClick:function(e){r.current.handleModalOpen()}},o.a.createElement(p.a,{icon:"chart-pie"})," Estad\xedsticas"),o.a.createElement(Q.a.Item,{onClick:e.resetForm},o.a.createElement(p.a,{icon:"undo-alt"})," Reiniciar formulario"),o.a.createElement(Q.a.Item,{onClick:function(){return document.getElementById("darkSwitch").click()}},o.a.createElement(p.a,{icon:"moon"})," Activar/desactivar modo nocturno"))),o.a.createElement("span",{style:{float:"left",marginLeft:5}}," Registro de cartas"),o.a.createElement(W,{ref:t,refreshData:e.refreshData}),o.a.createElement(J,{ref:a,refreshData:e.refreshData,allElements:e.allLetters}),o.a.createElement(te,{ref:r}))},re=function(e){var t=o.a.useRef(null);return o.a.createElement(j,null,o.a.createElement(ne,{allLetters:e.allLetters,refreshData:e.refreshData,resetForm:function(){t.current.reset()},showLista:function(){t.current.openLista()},online:e.online}),o.a.createElement(z,{allPublicadores:e.allPublicadores,allPublicos:e.allPublicos,allMedios:e.allMedios,refreshData:e.refreshData,ref:t}))},oe=function(e){var t=o.a.useState(e.show),a=Object(d.a)(t,2),n=a[0],r=a[1],i=o.a.useState({server:"",userName:"",password:""}),c=Object(d.a)(i,2),l=c[0],s=c[1],u=function(e){var t=e.target;s((function(e){return Object(I.a)(Object(I.a)({},e),{},Object(C.a)({},t.name,t.value))}))},m=function(){r(!1)};return o.a.useEffect((function(){window.localStorage.getItem("server")&&s((function(e){return Object(I.a)(Object(I.a)({},e),{},{server:window.localStorage.getItem("server")})}))}),[]),o.a.useEffect((function(){r(e.show)}),[e.show]),o.a.createElement(F.a,{show:n,onHide:m},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Iniciar sesi\xf3n")),o.a.createElement(F.a.Body,null,o.a.createElement(A.a.Group,{as:N.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Servidor:"),o.a.createElement(P.a,{sm:"8"},o.a.createElement(A.a.Control,{name:"server",value:l.server,onChange:u}))),o.a.createElement(A.a.Group,{as:N.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Usuario:"),o.a.createElement(P.a,{sm:"8"},o.a.createElement(A.a.Control,{name:"userName",value:l.userName,onChange:u}))),o.a.createElement(A.a.Group,{as:N.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Contrase\xf1a:"),o.a.createElement(P.a,{sm:"8"},o.a.createElement(A.a.Control,{type:"password",name:"password",value:l.password,onChange:u}))),o.a.createElement("div",{className:"text-center"},o.a.createElement(D.a,{variant:"primary",block:!0,onClick:function(t){if(""!=l.server.trim()&&""!=l.userName.trim&&""!=l.password.trim()){var a=l.server.trim();"/"==a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),f.a.Loading.arrows("Iniciando sesi\xf3n"),y.a.post(a+"/usuarios/login",{username:l.userName,password:l.password}).then((function(t){f.a.Report.success("Informaci\xf3n","Inicio de sesi\xf3n exitoso","OK"),f.a.Loading.remove(),m(),e.handleServerLogin(a,t.data.token)})).catch((function(e){f.a.Report.failure("Informaci\xf3n","Credenciales erroneas, reintente","OK"),f.a.Loading.remove()}))}}},"Iniciar sesi\xf3n"),o.a.createElement(D.a,{variant:"secondary",block:!0,onClick:m},"Usar sin conexi\xf3n"))))},ie=a(72),ce=a(17);ie.b.add(ce.a,ce.d,ce.r,ce.q,ce.t,ce.e,ce.h,ce.m,ce.b,ce.v,ce.u,ce.i,ce.l,ce.f,ce.g,ce.o,ce.c,ce.p,ce.n,ce.s,ce.k,ce.j),f.a.Report.init({backgroundColor:"#222",success:{titleColor:"#bebebe",messageColor:"#bebebe",buttonColor:"#bebebe"}});var le=function(){var e=o.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],i=o.a.useState([]),c=Object(d.a)(i,2),l=c[0],m=c[1],p=o.a.useState([]),h=Object(d.a)(p,2),v=h[0],E=h[1],g=o.a.useState([]),w=Object(d.a)(g,2),y=w[0],k=w[1],O=o.a.useState(!1),j=Object(d.a)(O,2),C=j[0],I=j[1],L=o.a.useState(!1),A=Object(d.a)(L,2),D=A[0],S=A[1],N=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,o,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==t&&(t={publicadores:!0,publicos:!0,medios:!0,records:!0}),null==n){e.next=31;break}if(void 0==window.localStorage.getItem("sessionToken")||""==window.localStorage.getItem("sessionToken")){e.next=9;break}return e.next=5,n.initOnlineServer(window.localStorage.getItem("server"),window.localStorage.getItem("sessionToken"));case 5:e.sent?(S(!0),M(!1)):M(!0),e.next=10;break;case 9:M(!0);case 10:if(!t.publicadores){e.next=15;break}return e.next=13,R.getAllPublicadores();case 13:a=e.sent,r(a);case 15:if(!t.publicos){e.next=20;break}return e.next=18,B.getAllPublicos();case 18:o=e.sent,m(o);case 20:if(!t.medios){e.next=25;break}return e.next=23,H.getAllMedios();case 23:i=e.sent,E(i);case 25:if(!t.records){e.next=30;break}return e.next=28,T.getAllRecords();case 28:c=e.sent,k(c);case 30:f.a.Loading.remove();case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.initOnlineServer(t,a);case 2:e.sent&&(N({publicadores:!0,publicos:!0,medios:!0,records:!0}),S(!0));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),M=function(e){I(e)};return o.a.useEffect((function(){f.a.Loading.arrows("Cargando ambiente"),new x(N)}),[]),o.a.createElement("div",{className:"App"},o.a.createElement(oe,{show:C,handleServerLogin:P}),o.a.createElement(b,null),o.a.createElement(re,{allLetters:y,allPublicadores:a,allPublicos:l,allMedios:v,refreshData:N,online:D}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(297);c.a.render(o.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[174,1,2]]]);
//# sourceMappingURL=main.4bf36c62.chunk.js.map