(this.webpackJsonprcch=this.webpackJsonprcch||[]).push([[0],{174:function(e,t,a){e.exports=a(298)},179:function(e,t,a){},181:function(e,t,a){},190:function(e,t){},192:function(e,t){},203:function(e,t){},205:function(e,t){},230:function(e,t){},232:function(e,t){},233:function(e,t){},239:function(e,t){},241:function(e,t){},259:function(e,t){},261:function(e,t){},273:function(e,t){},276:function(e,t){},298:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(24),c=a.n(i),l=(a(179),a(3)),u=a.n(l),s=a(8),d=a(15),m=(a(181),a(6)),f=a(14),p=function(){return o.a.createElement("nav",{className:"navbar navbar-expand-md shadow-sm"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"navbar-brand deco-none"},o.a.createElement(f.a,{icon:"address-book"})," Registro de Cartas Congregaci\xf3n La Herradura")))},b=a(33),v=a(34),h=a(170),E=a.n(h),g=a(47),w=a.n(g),x=function(){function e(t){var a=this;Object(b.a)(this,e),E()().then((function(e){a.online=!1,a.url="",a.token="",a.SQL=e,a.response=!1;var r=window.localStorage.getItem("rcchDB");null==r?a.createDatabase():a.db=new a.SQL.Database(a.toBinArray(r)),a.db.run("PRAGMA foreign_keys = ON;"),n=a,null!=t&&t()}))}return Object(v.a)(e,[{key:"initOnlineServer",value:function(){var e=Object(s.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.response){e.next=11;break}return this.online=!0,this.url=t,this.token=a,window.localStorage.setItem("sessionToken",a),window.localStorage.setItem("server",t),e.next=8,this.testOnlineConnection();case 8:n=e.sent,this.response=n,n||(this.online=!1);case 11:return e.abrupt("return",this.response);case 12:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"testOnlineConnection",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get(this.url+"/misc/test",{headers:{"access-token":this.token}});case 3:return t=e.sent,e.abrupt("return",200==t.status);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getInformation",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get(this.url+t,{headers:{"access-token":this.token}});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),m.a.Report.Failure("Informaci\xf3n","Sin conexi\xf3n con el servidor. Vuelva a iniciar sesi\xf3n","OK"),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"postInformation",value:function(){var e=Object(s.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.post(this.url+t,a,{headers:{"access-token":this.token}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),m.a.Report.Failure("Informaci\xf3n","Sin conexi\xf3n con el servidor. Vuelva a iniciar sesi\xf3n","OK"),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteInformation",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.delete(this.url+t,{headers:{"access-token":this.token}});case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.prev=7,e.t0=e.catch(0),m.a.Report.Failure("Informaci\xf3n","Sin conexi\xf3n con el servidor. Vuelva a iniciar sesi\xf3n","OK"),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createDatabase",value:function(){this.db=new this.SQL.Database,this.buildInitialTables(),this.insertInitialData(),this.saveExistingDatabase()}},{key:"importDatabase",value:function(e,t){var a=this,n=e[0],r=new FileReader;r.onload=function(){var e=new Uint8Array(r.result);a.db=new a.SQL.Database(e),null!==t&&t()},r.readAsArrayBuffer(n)}},{key:"getBDID",value:function(){return this.db.db}},{key:"isOnline",value:function(){return this.online}},{key:"executeCommand",value:function(e){this.db.run(e),this.saveExistingDatabase()}},{key:"saveExistingDatabase",value:function(){window.localStorage.setItem("rcchDB",this.toBinString(this.db.export()))}},{key:"exportExistingDatabase",value:function(){var e=this.db.export(),t=new Blob([e]),a=document.createElement("a");document.body.appendChild(a),a.href=window.URL.createObjectURL(t);var n=new Date,r=n.getFullYear(),o=n.getMonth()+1;o<10&&(o="0"+o);var i=n.getDate();i<10&&(i="0"+i);var c=i+"-"+o+"-"+r;a.download="registro_"+c+".rcch",a.onclick=function(){setTimeout((function(){window.URL.revokeObjectURL(a.href)}),1500)},a.click()}},{key:"buildInitialTables",value:function(){this.db.run("CREATE TABLE publicadores (id integer primary key autoincrement, nombre varchar(255) NOT NULL, grupo int(11) not null default '0', invitado boolean);"),this.db.run("CREATE TABLE medio (id integer primary key autoincrement, nombre varchar(255) NOT NULL, color varchar(255));"),this.db.run("CREATE TABLE publico (id integer primary key autoincrement, nombre varchar(255) NOT NULL, color varchar(255));"),this.db.run("CREATE TABLE records (id integer primary key autoincrement, hora datetime not null, publicador integer not null, medio integer NOT NULL, publico integer not null, textos integer not null, tipo integer not null, FOREIGN KEY (publicador) REFERENCES publicadores(id) ON DELETE CASCADE,FOREIGN KEY (publico) REFERENCES publico(id) ON DELETE CASCADE, FOREIGN KEY (medio) REFERENCES medio(id) ON DELETE CASCADE);")}},{key:"insertInitialData",value:function(){this.db.run("insert into publico (nombre, color) values ('P\xfablico general', 'purple')"),this.db.run("insert into publico (nombre, color) values ('Familiar', 'red')"),this.db.run("insert into publico (nombre, color) values ('Conocido', 'green')"),this.db.run("insert into publico (nombre, color) values ('Paciente', 'blue')"),this.db.run("insert into publico (nombre, color) values ('Trabajador', 'grey')"),this.db.run("insert into medio (nombre, color) values ('Personalmente', 'orange')"),this.db.run("insert into medio (nombre, color) values ('WhatsApp', 'green')"),this.db.run("insert into medio (nombre, color) values ('Email', 'blue')"),this.db.run("insert into medio (nombre, color) values ('Tel\xe9fono', 'pink')"),this.db.run("insert into medio (nombre, color) values ('Servicio postal', 'yellow')")}},{key:"getLastInsertedId",value:function(e){var t=0,a=this.db.prepare("SELECT max(id) as id from "+e);for(a.getAsObject();a.step();){t=a.getAsObject().id,console.log("flag")}return a.free(),console.log(t),t}},{key:"exec",value:function(e){var t=this.db.prepare(e);t.getAsObject();for(var a=[];t.step();)a.push(t.getAsObject());return t.free(),a}},{key:"toBinString",value:function(e){for(var t=new Uint8Array(e),a=[],n=0;65535*n<t.length;n++)a.push(String.fromCharCode.apply(null,t.subarray(65535*n,65535*(n+1))));return a.join("")}},{key:"toBinArray",value:function(e){for(var t=e.length,a=new Uint8Array(t),n=0;n<t;n++)a[n]=e.charCodeAt(n);return a}}]),e}(),y=a(173),k=a(172),O=function(e){Object(y.a)(a,e);var t=Object(k.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"container",style:{marginTop:"2%"}},o.a.createElement("div",{className:"row justify-content-center"},o.a.createElement("div",{className:"col-md-8"},o.a.createElement("div",{className:"card"},this.props.children))))}}]),a}(o.a.Component),j=a(37),C=a(7),I=a(45),A=a(13),L=a(20),S=a(28),D=a(25),N=a(23),R=function(){function e(t,a,n,r,o,i,c){Object(b.a)(this,e),this.id=t,this.hora=a,this.publicador=n,this.medio=r,this.publico=o,this.textos=i,this.tipo=c}return Object(v.a)(e,[{key:"delete",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=7;break}return e.next=3,n.deleteInformation("/records/"+this.id);case 3:return e.sent,e.abrupt("return",!0);case 7:return n.executeCommand("delete from records where id="+this.id),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"insert",value:function(){var t=Object(s.a)(u.a.mark((function t(a,r,o,i,c){var l,s,d,m,f,p,b,v,h,E;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.postInformation("/records",{publicador:a,medio:r,publico:o,textos:i,tipo:c});case 3:return l=t.sent,t.abrupt("return",new e(l.idRecord,l.publicador,l.medio,l.publico,l.textos,l.tipo));case 7:return s=new Date,d=s.getFullYear(),(m=s.getMonth()+1)<10&&(m="0"+m),(f=s.getDate())<10&&(f="0"+f),(p=s.getHours())<10&&(p="0"+p),(b=s.getMinutes())<10&&(b="0"+b),(v=s.getSeconds())<10&&(v="0"+v),h=d+"-"+m+"-"+f+" "+p+":"+b+":"+v,n.executeCommand("insert into records (hora, publicador, medio, publico, textos, tipo) values ('"+h+"',"+a+","+r+","+o+","+i+","+c+")"),E=n.getLastInsertedId("records"),t.abrupt("return",new e(E,h,a,r,o,i,c));case 23:case"end":return t.stop()}}),t)})));return function(e,a,n,r,o){return t.apply(this,arguments)}}()},{key:"getById",value:function(){var t=Object(s.a)(u.a.mark((function t(a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.getInformation("/records/"+a);case 3:return r=t.sent,t.abrupt("return",new e(r.idRecord,r.publicador,r.medio,r.publico,r.textos,r.tipo));case 7:if(0!=(o=n.exec("select * from records where id="+a)).length){t.next=10;break}return t.abrupt("return",!1);case 10:return t.abrupt("return",new e(o[0].id,o[0].hora,o[0].publicador,o[0].medio,o[0].publico,o[0].textos,o[0].tipo));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getAllRecords",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=9;break}return e.next=3,n.getInformation("/records/getLast");case 3:return t=e.sent,a=[],t.forEach((function(e){a.push(Object(C.a)(Object(C.a)({},e),{},{hora:e.hora_year+"-"+e.hora_month+"-"+e.hora_day+" "+e.hora_hour+":"+e.hora_minute+":"+e.hora_second}))})),e.abrupt("return",a);case 9:return e.abrupt("return",n.exec("select r.id, r.hora, r.textos, r.tipo, p.nombre as publicador, d.nombre as publico, m.nombre as medio from records r left join publicadores p on (r.publicador=p.id) left join publico d on (r.publico=d.id) left join medio m on (r.medio=m.id) order by 1 desc"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getDailyStats",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,a,r,o,i,c,l,s,d,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=7;break}return e.next=3,n.getInformation("/estadisticas/today");case 3:return t=e.sent,e.abrupt("return",t);case 7:return a=new Date,r=a.getFullYear(),(o=a.getMonth()+1)<10&&(o="0"+o),(i=a.getDate())<10&&(i="0"+i),c=r+"-"+o+"-"+i,l=n.exec("select count(*) as cartas, count(distinct(publicador)) as publicadores, sum(textos) as textos, SUM(CASE WHEN tipo = 1 THEN 1 ELSE 0 END) as revisitas, round(count(*)/count(distinct(publicador)),1) as porPublicador  from records where date(hora)=date('"+c+"')"),s=[],n.exec("select p.nombre as publico, count (r.id) as cartas, p.color  from records r left join publico p on (r.publico=p.id) group by publico having date('"+c+"')=date(hora)").map((function(e){s.push({title:e.publico,value:e.cartas,color:e.color})})),d=n.exec("select m.nombre as medio, count (r.id) as cartas, m.color  from records r left join medio m on (r.medio=m.id) group by medio having date('"+c+"')=date(hora)"),m=[],d.map((function(e){m.push({title:e.medio,value:e.cartas,color:e.color})})),e.abrupt("return",{cartas:l[0].cartas,publicadores:l[0].publicadores,textos:l[0].textos,revisitas:l[0].revisitas,porPublicador:l[0].porPublicador,publicos:s,medios:m});case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),T=function(){function e(t,a,n,r){Object(b.a)(this,e),this.id=t,this.nombre=a,this.grupo=n,this.invitado=r}return Object(v.a)(e,[{key:"delete",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=7;break}return e.next=3,n.deleteInformation("/publicadores/"+this.id);case 3:return e.sent,e.abrupt("return",!0);case 7:return n.executeCommand("delete from publicadores where id="+this.id),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"insert",value:function(){var t=Object(s.a)(u.a.mark((function t(a,r,o){var i,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.postInformation("/publicadores",{nombre:a,grupo:r,invitado:o});case 3:return i=t.sent,t.abrupt("return",new e(i.idPublicador,i.nombre,i.grupo,i.invitado));case 7:return n.executeCommand("insert into publicadores (nombre,grupo, invitado) values ('"+a+"',"+r+", "+o+")"),c=n.getLastInsertedId("publicadores"),t.abrupt("return",new e(c,a,r,o));case 10:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},{key:"getById",value:function(){var t=Object(s.a)(u.a.mark((function t(a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.getInformation("/publicadores/"+a);case 3:return r=t.sent,t.abrupt("return",new e(r.idPublicador,r.nombre,r.grupo,r.invitado));case 7:if(0!=(o=n.exec("select * from publicadores where id="+a)).length){t.next=10;break}return t.abrupt("return",!1);case 10:return t.abrupt("return",new e(o[0].id,o[0].nombre,o[0].isInvitado));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getAllPublicadores",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=9;break}return e.next=3,n.getInformation("/publicadores/getAll");case 3:return t=e.sent,a=[],t.forEach((function(e){a.push({value:e.idPublicador,label:e.nombre})})),e.abrupt("return",a);case 9:return e.abrupt("return",n.exec("select id as value, nombre as label from publicadores"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),P=function(){function e(t,a,n){Object(b.a)(this,e),this.id=t,this.nombre=a,this.color=n}return Object(v.a)(e,[{key:"delete",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=7;break}return e.next=3,n.deleteInformation("/publicos/"+this.id);case 3:return e.sent,e.abrupt("return",!0);case 7:return n.executeCommand("delete from publico where id="+this.id),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"insert",value:function(){var t=Object(s.a)(u.a.mark((function t(a,r){var o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.postInformation("/publicos",{nombre:a,color:r});case 3:return o=t.sent,t.abrupt("return",new e(o.idPublico,o.nombre,o.color));case 7:return n.executeCommand("insert into publico (nombre, color) values ('"+a+"', '"+r+"')"),i=n.getLastInsertedId("publico"),t.abrupt("return",new e(i,a,r));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"getById",value:function(){var t=Object(s.a)(u.a.mark((function t(a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.getInformation("/publicos/"+a);case 3:return r=t.sent,t.abrupt("return",new e(r.idPublico,r.nombre,r.color));case 7:if(0!=(o=n.exec("select * from publico where id="+a)).length){t.next=10;break}return t.abrupt("return",!1);case 10:return t.abrupt("return",new e(o[0].id,o[0].nombre,o[0].color));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getAllPublicos",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=9;break}return e.next=3,n.getInformation("/publicos/getAll");case 3:return t=e.sent,a=[],t.forEach((function(e){a.push({value:e.idPublico,label:e.nombre})})),e.abrupt("return",a);case 9:return e.abrupt("return",n.exec("select id as value, nombre as label from publico"));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),B=function(){function e(t,a,n){Object(b.a)(this,e),this.id=t,this.nombre=a,this.color=n}return Object(v.a)(e,[{key:"delete",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=7;break}return e.next=3,n.deleteInformation("/medios/"+this.id);case 3:return e.sent,e.abrupt("return",!0);case 7:return n.executeCommand("delete from medio where id="+this.id),e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"insert",value:function(){var t=Object(s.a)(u.a.mark((function t(a,r){var o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.postInformation("/medios",{nombre:a,color:r});case 3:return o=t.sent,t.abrupt("return",new e(o.idMedio,o.nombre,o.color));case 7:return n.executeCommand("insert into medio (nombre, color) values ('"+a+"', '"+r+"')"),i=n.getLastInsertedId("medio"),t.abrupt("return",new e(i,a,r));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"getById",value:function(){var t=Object(s.a)(u.a.mark((function t(a){var r,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isOnline()){t.next=7;break}return t.next=3,n.getInformation("/medios/"+a);case 3:return r=t.sent,t.abrupt("return",new e(r.idMedio,r.nombre,r.color));case 7:if(0!=(o=n.exec("select * from medio where id="+a)).length){t.next=10;break}return t.abrupt("return",!1);case 10:return t.abrupt("return",new e(o[0].id,o[0].nombre,o[0].color));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();B.getAllMedios=Object(s.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=9;break}return e.next=3,n.getInformation("/medios/getAll");case 3:return t=e.sent,a=[],t.forEach((function(e){a.push({value:e.idMedio,label:e.nombre})})),e.abrupt("return",a);case 9:return e.abrupt("return",n.exec("select id as value, nombre as label from medio"));case 10:case"end":return e.stop()}}),e)})));var M=B,F=a(12),H=o.a.forwardRef((function(e,t){var a=o.a.useState(!1),n=Object(d.a)(a,2),r=n[0],i=n[1];return o.a.useImperativeHandle(t,(function(){return{handleModalOpen:function(e){i(!0)}}})),o.a.createElement(F.a,{show:r,onHide:function(e){i(!1)}},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Gestionar ",e.tipo)),o.a.createElement(F.a.Body,null,e.allElements.map((function(t){return o.a.createElement("a",{key:t.value,className:"list-group-item list-group-item-action flex-column align-items-start"},o.a.createElement("div",{key:"div"+t.value,className:"d-flex w-100 justify-content-between"},o.a.createElement("h5",{key:"h5"+t.value,className:"mb-1"},t.label),o.a.createElement("small",{key:"small"+t.value,className:"text-muted"},o.a.createElement(f.a,{key:"fw"+t.value,onClick:function(){return e.deleteFunction(t.value)},icon:"trash-alt"}))))}))))})),G=a(84),U=a(108),K={menu:function(e,t){return Object(C.a)(Object(C.a)({},e),{},{backgroundColor:"#181818",color:"#AEBEAE",zIndex:3})},option:function(e,t){return Object(C.a)(Object(C.a)({},e),{},{backgroundColor:t.isFocused?"#222222":"181818",color:"#AEBEAE"})},input:function(e,t){return Object(C.a)(Object(C.a)({},e),{},{color:"#AEBEAE"})},control:function(e,t){return Object(C.a)(Object(C.a)({},e),{},{background:"transparent",borderColor:"#404040"})},singleValue:function(e,t){return Object(C.a)(Object(C.a)({},e),{},{color:"#AEBEAE"})}},_=o.a.forwardRef((function(e,t){var a=o.a.useState(!1),r=Object(d.a)(a,2),i=r[0],c=r[1],l=o.a.useState([]),p=Object(d.a)(l,2),b=p[0],v=p[1],h=o.a.useState([]),E=Object(d.a)(h,2),g=E[0],w=E[1],x=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var t=Object(s.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(a=window.prompt("Ingrese nombre del invitado"))&&void 0!==a&&""!==a.trim()){t.next=3;break}return t.abrupt("return",!1);case 3:return m.a.Loading.Arrows("Agregando invitado"),t.next=6,T.insert(a,0,!0);case 6:return n=t.sent,t.next=9,e.refreshData({publicadores:!0});case 9:return m.a.Notify.Success("Invitado agregado"),j({label:a,value:n.id}),t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();o.a.useImperativeHandle(t,(function(){return{handleModalOpen:function(e){return Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.a.Loading.Arrows("Recuperando lista de espera"),e.next=3,O();case 3:c(!0),m.a.Loading.Remove();case 5:case"end":return e.stop()}}),e)})))()}}}));var k=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=3;break}return e.next=3,n.postInformation("/listas",{lista:t});case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isOnline()){e.next=5;break}return e.next=3,n.getInformation("/listas");case 3:t=e.sent,v(t.lista);case 5:return e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e){for(var t=[],a=0;a<b.length;a++)t.push(b[a]);if(function(e,t){var a;for(a=0;a<t.length;a++)if(t[a]===e)return!0;return!1}(e,t))return!1;if(C(e))t.push(e);else{for(var n=!0,r=0;r<t.length;r++)if(C(t[r])){t.splice(r,0,e),n=!1;break}n&&t.push(e)}v(t),k(t)},C=function(e){return-1!=g.indexOf(e)},I=function(e){var t=Object(U.a)(b);return t.splice(t.indexOf(e),1),v(t),k(t),t};return o.a.createElement(F.a,{show:i,onHide:x},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Lista de espera")),o.a.createElement(F.a.Body,null,o.a.createElement(A.a.Group,{as:D.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Publicador"),o.a.createElement(N.a,{sm:"8"},o.a.createElement(S.a,null,o.a.createElement(G.a,{options:e.allPublicadores,styles:K,name:"fldPublicador",onChange:function(e){j(e),m.a.Notify.Success("Publicador agregado a la lista")}}),o.a.createElement(S.a.Append,null,o.a.createElement(L.a,{variant:"outline-secondary",onClick:y},o.a.createElement(f.a,{icon:"hiking"})))))),o.a.createElement("div",{styles:{paddingTop:"20%"}},b.map((function(t,a){return o.a.createElement("a",{key:t.value,className:"list-group-item list-group-item-action flex-column align-items-start"},o.a.createElement("div",{className:"d-flex w-100 justify-content-between"},o.a.createElement("h5",{className:"mb-1",onClick:function(){!function(t){I(t);w([].concat(Object(U.a)(g),[t])),e.replacePublicador(t),x()}(t)}},o.a.createElement("span",{className:"currentNumber"}," ",a+1,"# ")," ",t.label),o.a.createElement("small",{className:"text-muted"},o.a.createElement(f.a,{icon:"trash-alt",onClick:function(){I(t)}}))))})))))})),V=function(e){var t={};e.fields.forEach((function(e){t=Object(C.a)(Object(C.a)({},t),{},Object(j.a)({},e.name,e.default))}));var a=o.a.useState(t),n=Object(d.a)(a,2),r=n[0],i=n[1],c=function(e){var t=e.target;"checkbox"===t.type?i((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(j.a)({},t.name,t.checked))})):i((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(j.a)({},t.name,t.value))}))};return o.a.createElement(F.a,{show:e.show,onHide:function(t){e.setShow(!1),console.log(r)}},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Agregar ",e.tipo)),o.a.createElement(F.a.Body,null,e.fields.map((function(e,t){return o.a.createElement(A.a.Group,{as:D.a,key:t},o.a.createElement(A.a.Label,{column:!0,sm:"4"},e.label),o.a.createElement(N.a,{sm:"8"},o.a.createElement(A.a.Control,{type:e.type,name:e.name,value:r[e.name],checked:r[e.name],onChange:c})))})),o.a.createElement("div",{className:"text-center"},o.a.createElement(L.a,{variant:"primary",onClick:function(a){a.preventDefault(),e.submitFunction(r)&&i(t)}},"Agregar"))))},Y={menu:function(e,t){return Object(C.a)(Object(C.a)({},e),{},{backgroundColor:"#181818",color:"#AEBEAE",zIndex:3})},option:function(e,t){return Object(C.a)(Object(C.a)({},e),{},{backgroundColor:t.isFocused?"#222222":"181818",color:"#AEBEAE"})},input:function(e,t){return Object(C.a)(Object(C.a)({},e),{},{color:"#AEBEAE"})},control:function(e,t){return Object(C.a)(Object(C.a)({},e),{},{background:"transparent",borderColor:"#404040"})},singleValue:function(e,t){return Object(C.a)(Object(C.a)({},e),{},{color:"#AEBEAE"})}},q=o.a.forwardRef((function(e,t){var a=o.a.useState(!1),n=Object(d.a)(a,2),r=n[0],i=n[1],c=o.a.useState(!1),l=Object(d.a)(c,2),p=l[0],b=l[1],v=o.a.useState(!1),h=Object(d.a)(v,2),E=h[0],g=h[1],w=o.a.useState({fldPublicador:{value:"0",label:"Seleccione"},fldDestinatario:1,fldMedio:1,fldTextos:0,fldTipo:"0"}),x=Object(d.a)(w,2),y=x[0],k=x[1],O=o.a.useRef(null),B=o.a.useRef(null),F=o.a.useRef(null),U=o.a.useRef(null),K=function(e){"publicadores"==e?O.current.handleModalOpen():"publicos"==e?F.current.handleModalOpen():"lista"==e?U.current.handleModalOpen():B.current.handleModalOpen()},q=function(){k({fldPublicador:{value:"0",label:"Seleccione"},fldDestinatario:1,fldMedio:1,fldTextos:0,fldTipo:"0"})};o.a.useImperativeHandle(t,(function(){return{reset:function(){q()},openLista:function(){K("lista")}}}));var z=function(e){if("target"in e){var t=e.target,a=t.name,n=t.value;k(Object(C.a)(Object(C.a)({},y),{},Object(j.a)({},a,n)))}else k(Object(C.a)(Object(C.a)({},y),{},{fldPublicador:e}))},Q=function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!=y.fldPublicador.value){e.next=3;break}return e.abrupt("return",!1);case 3:return m.a.Loading.Arrows("Agregando registro"),e.next=6,R.insert(y.fldPublicador.value,y.fldMedio,y.fldDestinatario,y.fldTextos,y.fldTipo);case 6:e.sent,m.a.Loading.Remove(),q(),m.a.Notify.Success("Registro agregado");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m.a.Loading.Arrows("Eliminando publicador"),t.next=3,T.getById(a);case 3:if(0==(n=t.sent)){t.next=7;break}return t.next=7,n.delete();case 7:m.a.Notify.Success("Publicador eliminado"),m.a.Loading.Remove(),e.refreshData({publicadores:!0});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m.a.Loading.Arrows("Eliminando medio"),t.next=3,M.getById(a);case 3:if(0==(n=t.sent)){t.next=7;break}return t.next=7,n.delete();case 7:m.a.Notify.Success("Medio eliminado"),m.a.Loading.Remove(),e.refreshData({medios:!0});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),$=function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m.a.Loading.Arrows("Eliminando p\xfablico"),t.next=3,P.getById(a);case 3:if(0==(n=t.sent)){t.next=7;break}return t.next=7,n.delete();case 7:m.a.Notify.Success("Publico eliminado"),m.a.Loading.Remove(),e.refreshData({publicos:!0});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),X=function(e){"publicador"===e?i(!0):"medio"===e?b(!0):g(!0)},Z=function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a.nombre&&void 0!==a.nombre&&""!==a.nombre.trim()){t.next=2;break}return t.abrupt("return",!1);case 2:if(null!==a.grupo&&void 0!==a.grupo&&""!==a.grupo.trim()){t.next=4;break}return t.abrupt("return",!1);case 4:return m.a.Loading.Arrows("Agregando publicador"),t.next=7,T.insert(a.nombre,a.grupo,a.isInvitado);case 7:return n=t.sent,m.a.Loading.Remove(),t.next=11,e.refreshData({publicadores:!0});case 11:return m.a.Notify.Success("Publicador agregado"),k(Object(C.a)(Object(C.a)({},y),{},{fldPublicador:{value:n.id,label:n.nombre}})),t.abrupt("return",!0);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ee=function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a.nombre&&void 0!==a.nombre&&""!==a.nombre.trim()){t.next=2;break}return t.abrupt("return",!1);case 2:if(null!==a.color&&void 0!==a.color&&""!==a.color.trim()){t.next=4;break}return t.abrupt("return",!1);case 4:return m.a.Loading.Arrows("Agregando medio"),t.next=7,M.insert(a.nombre,a.color);case 7:return n=t.sent,m.a.Loading.Remove(),t.next=11,e.refreshData({medios:!0});case 11:return m.a.Notify.Success("Medio agregado"),k(Object(C.a)(Object(C.a)({},y),{},{fldMedio:n.id})),t.abrupt("return",!0);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),te=function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==a.nombre&&void 0!==a.nombre&&""!==a.nombre.trim()){t.next=2;break}return t.abrupt("return",!1);case 2:if(null!==a.color&&void 0!==a.color&&""!==a.color.trim()){t.next=4;break}return t.abrupt("return",!1);case 4:return m.a.Loading.Arrows("Agregando p\xfablico"),t.next=7,P.insert(a.nombre,a.color);case 7:return n=t.sent,m.a.Loading.Remove(),m.a.Notify.Success("Publico agregado"),t.next=12,e.refreshData({publicos:!0});case 12:return k(Object(C.a)(Object(C.a)({},y),{},{fldDestinatario:n.id})),t.abrupt("return",!0);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return o.a.createElement(A.a,{onSubmit:Q},o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"container"},o.a.createElement(A.a.Group,{as:D.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Publicador"),o.a.createElement(N.a,{sm:"8"},o.a.createElement(S.a,null,o.a.createElement(G.a,{options:e.allPublicadores,styles:Y,name:"fldPublicador",value:y.fldPublicador,onChange:z}),o.a.createElement(S.a.Append,null,o.a.createElement(L.a,{variant:"outline-secondary",onClick:function(){X("publicador")}},o.a.createElement(f.a,{icon:"plus-square"})),o.a.createElement(L.a,{variant:"outline-secondary",onClick:function(){return K("publicadores")}},o.a.createElement(f.a,{icon:"pencil-alt"})),o.a.createElement(L.a,{variant:"outline-secondary",onClick:function(){return K("lista")}},o.a.createElement(f.a,{icon:"ellipsis-h"})),o.a.createElement(H,{tipo:"Publicadores",allElements:e.allPublicadores,ref:O,refreshData:e.refreshData,deleteFunction:W}),o.a.createElement(V,{show:r,setShow:i,tipo:"Publicador",submitFunction:Z,fields:[{name:"nombre",type:"text",label:"Nombre",default:""},{name:"grupo",type:"number",label:"Grupo",default:"0"},{name:"isInvitado",type:"checkbox",label:"\xbfEs invitado?",default:!1}]}))))),o.a.createElement(A.a.Group,{as:D.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Destinatario"),o.a.createElement(N.a,{sm:"8"},o.a.createElement(S.a,null,o.a.createElement(A.a.Control,{as:"select",name:"fldDestinatario",value:y.fldDestinatario,onChange:z},e.allPublicos.map((function(e){return o.a.createElement("option",{key:e.value,value:e.value},e.label)}))),o.a.createElement(S.a.Append,null,o.a.createElement(L.a,{variant:"outline-secondary",onClick:function(){X("publico")}},o.a.createElement(f.a,{icon:"plus-square"})),o.a.createElement(L.a,{variant:"outline-secondary",onClick:function(){return K("publicos")}},o.a.createElement(f.a,{icon:"pencil-alt"})),o.a.createElement(H,{tipo:"Destinatarios",allElements:e.allPublicos,ref:F,refreshData:e.refreshData,deleteFunction:$}),o.a.createElement(V,{show:E,setShow:g,tipo:"Destinatario",submitFunction:te,fields:[{name:"nombre",type:"text",label:"Nombre",default:""},{name:"color",type:"color",label:"Color",default:""}]}))))),o.a.createElement(A.a.Group,{as:D.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Medio"),o.a.createElement(N.a,{sm:"8"},o.a.createElement(S.a,null,o.a.createElement(A.a.Control,{as:"select",name:"fldMedio",value:y.fldMedio,onChange:z},e.allMedios.map((function(e){return o.a.createElement("option",{key:e.value,value:e.value},e.label)}))),o.a.createElement(S.a.Append,null,o.a.createElement(L.a,{variant:"outline-secondary",onClick:function(){X("medio")}},o.a.createElement(f.a,{icon:"plus-square"})),o.a.createElement(L.a,{variant:"outline-secondary",onClick:function(){return K("medios")}},o.a.createElement(f.a,{icon:"pencil-alt"})),o.a.createElement(H,{tipo:"Medios",allElements:e.allMedios,ref:B,refreshData:e.refreshData,deleteFunction:J}),o.a.createElement(V,{show:p,setShow:b,tipo:"Medio",submitFunction:ee,fields:[{name:"nombre",type:"text",label:"Nombre",default:""},{name:"color",type:"color",label:"Color",default:""}]}))))),o.a.createElement(A.a.Group,{as:D.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Textos b\xedblicos"),o.a.createElement(N.a,{sm:"8"},o.a.createElement(S.a,null,o.a.createElement(S.a.Prepend,null,o.a.createElement(L.a,{variant:"outline-secondary",onClick:function(){k((function(e){return Object(C.a)(Object(C.a)({},y),{},{fldTextos:e.fldTextos-1})}))}},"-")),o.a.createElement(I.a,{name:"fldTextos",value:y.fldTextos,onChange:z}),o.a.createElement(S.a.Append,null,o.a.createElement(L.a,{variant:"outline-secondary",onClick:function(){k((function(e){return Object(C.a)(Object(C.a)({},y),{},{fldTextos:e.fldTextos+1})}))}},"+"))))),o.a.createElement(A.a.Group,{as:D.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Tipo"),o.a.createElement(N.a,{sm:"8"},o.a.createElement(A.a.Check,{type:"radio",name:"fldTipo",label:"Primera visita",value:"0",checked:"0"===y.fldTipo,onChange:z}),o.a.createElement(A.a.Check,{type:"radio",label:"Revisita",name:"fldTipo",value:"1",checked:"1"===y.fldTipo,onChange:z})))),o.a.createElement("div",{className:"text-center"},o.a.createElement(L.a,{variant:"primary",type:"submit"},"Guardar registro"))),o.a.createElement(_,{allPublicadores:e.allPublicadores,ref:U,addPublicador:Z,refreshData:e.refreshData,replacePublicador:function(e){k(Object(C.a)(Object(C.a)({},y),{},{fldPublicador:e}))}}))})),z=a(29),Q=o.a.forwardRef((function(e,t){var a=o.a.useState(!1),i=Object(d.a)(a,2),c=i[0],l=i[1],u=function(e){l(!1)};o.a.useImperativeHandle(t,(function(){return{handleModalOpen:function(e){l(!0)}}}));var s=function(t){n.importDatabase(t,e.refreshData),u(),m.a.Report.Success("Informaci\xf3n","Base de datos importada con \xe9xito","OK")},f=function(e){var t=e.dataTransfer.files;s(t)},p=function(e){document.getElementById("drop-area").classList.add("highlight")},b=function(e){document.getElementById("drop-area").classList.remove("highlight")},v=function(e){e.preventDefault(),e.stopPropagation()};return Object(r.useEffect)((function(){c&&(["dragenter","dragover","dragleave","drop"].forEach((function(e){document.getElementById("drop-area").addEventListener(e,v,!1)})),["dragenter","dragover"].forEach((function(e){document.getElementById("drop-area").addEventListener(e,p,!1)})),["dragleave","drop"].forEach((function(e){document.getElementById("drop-area").addEventListener(e,b,!1)})),document.getElementById("drop-area").addEventListener("drop",f,!1))}),[c]),o.a.createElement(F.a,{show:c,onHide:u},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Importar base de datos")),o.a.createElement(F.a.Body,null,o.a.createElement("div",{id:"drop-area"},o.a.createElement("form",{className:"my-form"},o.a.createElement("p",null,"Arrastre el archivo con extensi\xf3n .RCCH o pulse el siguiente bot\xf3n para buscarlo"),o.a.createElement("input",{type:"file",id:"fileElem",name:"fileElem",onChange:function(e){var t=e.target.files;s(t)}}),o.a.createElement("label",{className:"btn btn-primary",htmlFor:"fileElem"},"Buscar archivo")))))})),W=o.a.forwardRef((function(e,t){var a=o.a.useState(!1),n=Object(d.a)(a,2),r=n[0],i=n[1];o.a.useImperativeHandle(t,(function(){return{handleModalOpen:function(t){return Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m.a.Loading.Arrows("Cargando datos"),e.refreshData({records:!0}),i(!0),m.a.Loading.Remove();case 4:case"end":return t.stop()}}),t)})))()}}}));var c=function(){var t=Object(s.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m.a.Loading.Arrows("Eliminando registro"),t.next=3,R.getById(a);case 3:if(0==(n=t.sent)){t.next=7;break}return t.next=7,n.delete();case 7:m.a.Notify.Success("Carta eliminada"),m.a.Loading.Remove(),e.refreshData({records:!0});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return o.a.createElement(F.a,{show:r,onHide:function(e){i(!1)}},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Historial de cartas")),o.a.createElement(F.a.Body,null,e.allElements.map((function(e){return o.a.createElement("a",{key:e.id,className:"list-group-item list-group-item-action flex-column align-items-start"},o.a.createElement("div",{key:"div"+e.id,className:"d-flex w-100 justify-content-between"},o.a.createElement("h5",{key:"h5"+e.id,className:"mb-1"},e.publicador),o.a.createElement("small",{key:"small"+e.id,className:"text-muted"}," ",function(e){"object"!==typeof e&&(e=new Date(e));var t,a=Math.floor((new Date-e)/1e3),n=Math.floor(a/31536e3);return n>=1?t="a\xf1o":(n=Math.floor(a/2592e3))>=1?t="mes":(n=Math.floor(a/86400))>=1?t="d\xeda":(n=Math.floor(a/3600))>=1?t="hora":(n=Math.floor(a/60))>=1?t="minuto":(n=a,t="segundo"),(n>1||0===n)&&(t+="s"),"Hace "+n+" "+t}(e.hora)," ",o.a.createElement(f.a,{key:"fw"+e.id,onClick:function(){return c(e.id)},icon:"trash-alt"}))),o.a.createElement("p",{className:"mb-1"},o.a.createElement("font",{color:0==e.tipo?"purple":"orange"},0==e.tipo?"Primera visita":"Revisita")," a ",e.publico),o.a.createElement("small",{className:"text-muted"},"Enviada por ",e.medio))}))))})),J=a(74),$=a(107),X=function(e){return o.a.createElement("div",{style:{float:"left",width:e.width,textAlign:"center",height:80,marginTop:10}},o.a.createElement("h4",null,e.label),o.a.createElement("h4",{styles:{marginTop:10}},e.value," ",o.a.createElement(f.a,{icon:e.icon,style:e.color})))},Z=o.a.forwardRef((function(e,t){var a=o.a.useState(!1),n=Object(d.a)(a,2),r=n[0],i=n[1],c=o.a.useState({cartas:0,publicadores:0,textos:0,revisitas:0,porPublicador:0,publicos:[{title:"One",value:10,color:"#E38627"},{title:"Two",value:15,color:"#C13C37"},{title:"Three",value:20,color:"#6A2135"}],medios:[{title:"One",value:10,color:"#E38627"},{title:"Two",value:15,color:"#C13C37"},{title:"Three",value:20,color:"#6A2135"}]}),l=Object(d.a)(c,2),f=l[0],p=l[1];o.a.useImperativeHandle(t,(function(){return{handleModalOpen:function(e){return Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.a.Loading.Arrows("Cargando estadisticas"),e.next=3,b();case 3:i(!0),m.a.Loading.Remove();case 5:case"end":return e.stop()}}),e)})))()}}}));var b=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.getDailyStats();case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(F.a,{show:r,onHide:function(e){i(!1)}},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Estad\xedsticas del d\xeda de hoy")),o.a.createElement(F.a.Body,null,o.a.createElement(J.a,{interval:5e9},o.a.createElement(J.a.Item,null,o.a.createElement("h1",{className:"display-5",style:{textAlign:"center"}},"\xbfC\xf3mo nos fue?"),o.a.createElement(X,{label:"Cartas",value:f.cartas,icon:"envelope",color:{color:"brown"},width:"50%"}),o.a.createElement(X,{label:"Publicadores",value:f.publicadores,icon:"hand-paper",color:{color:"green"},width:"50%"}),o.a.createElement(X,{label:"Textos",value:f.textos,icon:"book",color:{color:"grey"},width:"50%"}),o.a.createElement(X,{label:"Revisitas",value:f.revisitas,icon:"undo-alt",color:{color:"orange"},width:"50%"}),o.a.createElement(X,{label:"Cartas por publicador",value:f.porPublicador,icon:"user-edit",color:{color:"blue"},width:"100%"})),o.a.createElement(J.a.Item,null,o.a.createElement("h1",{className:"display-5",style:{textAlign:"center"}},"\xbfA qui\xe9n enviaremos?"),o.a.createElement($.PieChart,{style:{height:300},data:f.publicos,label:function(e){var t=e.dataEntry;return"".concat(t.title+": "+Math.round(t.percentage)," %")},labelStyle:{fontSize:"5px",fontFamily:"sans-serif",fill:"white"}})),o.a.createElement(J.a.Item,null,o.a.createElement("h1",{className:"display-5",style:{textAlign:"center"}},"\xbfC\xf3mo se enviar\xe1n?"),o.a.createElement($.PieChart,{style:{height:300},data:f.medios,label:function(e){var t=e.dataEntry;return"".concat(t.title+": "+Math.round(t.percentage)," %")},labelStyle:{fontSize:"5px",fontFamily:"sans-serif",fill:"white"}})))))})),ee=o.a.forwardRef((function(e,t){var a=e.children,n=e.onClick;return o.a.createElement("span",{ref:t,onClick:function(e){e.preventDefault(),n(e)}},o.a.createElement(f.a,{icon:"cog"}),a)})),te=function(e){var t=o.a.useRef(null),a=o.a.useRef(null),r=o.a.useRef(null);return o.a.createElement("div",{className:"card-header"},o.a.createElement(z.a,{style:{float:"left"}},o.a.createElement(z.a.Toggle,{as:ee,id:"dropdown-basic"}),o.a.createElement(z.a.Menu,null,o.a.createElement(z.a.Item,{onClick:function(){window.confirm("Se borrar\xe1n todos los datos guardados")&&(n.createDatabase(),e.refreshData())},style:e.online?{display:"none"}:{}}," ",o.a.createElement(f.a,{icon:"file"})," Nueva base de datos"),o.a.createElement(z.a.Item,{onClick:function(e){t.current.handleModalOpen()},style:e.online?{display:"none"}:{}},o.a.createElement(f.a,{icon:"folder"})," Abrir base de datos"),o.a.createElement(z.a.Item,{onClick:function(){n.exportExistingDatabase()},style:e.online?{display:"none"}:{}},o.a.createElement(f.a,{icon:"download"})," Descargar base de datos"),o.a.createElement(z.a.Item,{style:e.online?{}:{display:"none"},onClick:function(){m.a.Loading.Arrows("Cerrando sesi\xf3n"),window.localStorage.removeItem("sessionToken"),window.location.reload()}},o.a.createElement(f.a,{icon:"sign-out-alt"})," Cerrar sesi\xf3n"),o.a.createElement(z.a.Item,{onClick:e.showLista},o.a.createElement(f.a,{icon:"ellipsis-h"})," Lista de espera"),o.a.createElement(z.a.Item,{onClick:function(e){a.current.handleModalOpen()}},o.a.createElement(f.a,{icon:"history"})," Ver historial"),o.a.createElement(z.a.Item,{onClick:function(e){r.current.handleModalOpen()}},o.a.createElement(f.a,{icon:"chart-pie"})," Estad\xedsticas"),o.a.createElement(z.a.Item,{onClick:e.resetForm},o.a.createElement(f.a,{icon:"undo-alt"})," Reiniciar formulario"),o.a.createElement(z.a.Item,{onClick:function(){return document.getElementById("darkSwitch").click()}},o.a.createElement(f.a,{icon:"moon"})," Activar/desactivar modo nocturno"))),o.a.createElement("span",{style:{float:"left",marginLeft:5}}," Registro de cartas"),o.a.createElement(Q,{ref:t,refreshData:e.refreshData}),o.a.createElement(W,{ref:a,refreshData:e.refreshData,allElements:e.allLetters}),o.a.createElement(Z,{ref:r}))},ae=function(e){var t=o.a.useRef(null);return o.a.createElement(O,null,o.a.createElement(te,{allLetters:e.allLetters,refreshData:e.refreshData,resetForm:function(){t.current.reset()},showLista:function(){t.current.openLista()},online:e.online}),o.a.createElement(q,{allPublicadores:e.allPublicadores,allPublicos:e.allPublicos,allMedios:e.allMedios,refreshData:e.refreshData,ref:t}))},ne=function(e){var t=o.a.useState(e.show),a=Object(d.a)(t,2),n=a[0],r=a[1],i=o.a.useState({server:"",userName:"",password:""}),c=Object(d.a)(i,2),l=c[0],u=c[1],s=function(e){var t=e.target;u((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(j.a)({},t.name,t.value))}))},f=function(){r(!1)};return o.a.useEffect((function(){window.localStorage.getItem("server")&&u((function(e){return Object(C.a)(Object(C.a)({},e),{},{server:window.localStorage.getItem("server")})}))}),[]),o.a.useEffect((function(){r(e.show)}),[e.show]),o.a.createElement(F.a,{show:n,onHide:f},o.a.createElement(F.a.Header,{closeButton:!0},o.a.createElement(F.a.Title,null,"Iniciar sesi\xf3n")),o.a.createElement(F.a.Body,null,o.a.createElement(A.a.Group,{as:D.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Servidor:"),o.a.createElement(N.a,{sm:"8"},o.a.createElement(A.a.Control,{name:"server",value:l.server,onChange:s}))),o.a.createElement(A.a.Group,{as:D.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Usuario:"),o.a.createElement(N.a,{sm:"8"},o.a.createElement(A.a.Control,{name:"userName",value:l.userName,onChange:s}))),o.a.createElement(A.a.Group,{as:D.a},o.a.createElement(A.a.Label,{column:!0,sm:"4"},"Contrase\xf1a:"),o.a.createElement(N.a,{sm:"8"},o.a.createElement(A.a.Control,{type:"password",name:"password",value:l.password,onChange:s}))),o.a.createElement("div",{className:"text-center"},o.a.createElement(L.a,{variant:"primary",block:!0,onClick:function(t){if(""!=l.server.trim()&&""!=l.userName.trim&&""!=l.password.trim()){var a=l.server.trim();"/"==a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),m.a.Loading.Arrows("Iniciando sesi\xf3n"),w.a.post(a+"/usuarios/login",{username:l.userName,password:l.password}).then((function(t){m.a.Report.Success("Informaci\xf3n","Inicio de sesi\xf3n exitoso","OK"),m.a.Loading.Remove(),f(),e.handleServerLogin(a,t.data.token)})).catch((function(e){m.a.Report.Failure("Informaci\xf3n","Credenciales erroneas, reintente","OK"),m.a.Loading.Remove()}))}}},"Iniciar sesi\xf3n"),o.a.createElement(L.a,{variant:"secondary",block:!0,onClick:f},"Usar sin conexi\xf3n"))))},re=a(71),oe=a(17);re.b.add(oe.a,oe.d,oe.p,oe.o,oe.r,oe.e,oe.h,oe.k,oe.b,oe.t,oe.s,oe.i,oe.j,oe.f,oe.g,oe.m,oe.c,oe.n,oe.l,oe.q),m.a.Report.Init({backgroundColor:"#222",success:{titleColor:"#bebebe",messageColor:"#bebebe",buttonColor:"#bebebe"}});var ie=function(){var e=o.a.useState([]),t=Object(d.a)(e,2),a=t[0],r=t[1],i=o.a.useState([]),c=Object(d.a)(i,2),l=c[0],f=c[1],b=o.a.useState([]),v=Object(d.a)(b,2),h=v[0],E=v[1],g=o.a.useState([]),w=Object(d.a)(g,2),y=w[0],k=w[1],O=o.a.useState(!1),j=Object(d.a)(O,2),C=j[0],I=j[1],A=o.a.useState(!1),L=Object(d.a)(A,2),S=L[0],D=L[1],N=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,o,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0==t&&(t={publicadores:!0,publicos:!0,medios:!0,records:!0}),null==n){e.next=31;break}if(void 0==window.localStorage.getItem("sessionToken")||""==window.localStorage.getItem("sessionToken")){e.next=9;break}return e.next=5,n.initOnlineServer(window.localStorage.getItem("server"),window.localStorage.getItem("sessionToken"));case 5:e.sent?(D(!0),F(!1)):F(!0),e.next=10;break;case 9:F(!0);case 10:if(!t.publicadores){e.next=15;break}return e.next=13,T.getAllPublicadores();case 13:a=e.sent,r(a);case 15:if(!t.publicos){e.next=20;break}return e.next=18,P.getAllPublicos();case 18:o=e.sent,f(o);case 20:if(!t.medios){e.next=25;break}return e.next=23,M.getAllMedios();case 23:i=e.sent,E(i);case 25:if(!t.records){e.next=30;break}return e.next=28,R.getAllRecords();case 28:c=e.sent,k(c);case 30:m.a.Loading.Remove();case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(s.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.initOnlineServer(t,a);case 2:e.sent&&(N({publicadores:!0,publicos:!0,medios:!0,records:!0}),D(!0));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),F=function(e){I(e)};return o.a.useEffect((function(){m.a.Loading.Arrows("Cargando ambiente"),new x(N)}),[]),o.a.createElement("div",{className:"App"},o.a.createElement(ne,{show:C,handleServerLogin:B}),o.a.createElement(p,null),o.a.createElement(ae,{allLetters:y,allPublicadores:a,allPublicos:l,allMedios:h,refreshData:N,online:S}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(297);c.a.render(o.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[174,1,2]]]);
//# sourceMappingURL=main.bd64240a.chunk.js.map